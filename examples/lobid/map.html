[% SET long = location.geo_long %]
[% SET lat  = location.geo_lat %]
[% IF long AND lat %]
<div rel="geo:location" class="location"> 
  <div typeof="rdf:Description" id="map_canvas" style="width:400px; height:400px"> 
    <span property="geo:lat"  content="$loc.geo_lat"/> 
    <span property="geo:long" content="$loc.geo_long"/> 
    <noscript> 
      <div>
        <img src="http://maps.google.com/maps/api/staticmap?zoom=14&amp;size=400x400&amp;sensor=false&amp;markers=color:red|label:B|$lat,$long" alt="Map" />
      </div>
    </noscript> 
    </div> 
    <script type="text/javascript"><!--
        var latlng = new google.maps.LatLng($lat,$long);
        var myOptions = {
            zoom: 14,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        var marker = new google.maps.Marker({
            position: latlng
            [% IF title %], title: '$title'[% END %]
        });
        marker.setMap(map);
    -->
    </script> 
  </div>
</div>
[% END %]
